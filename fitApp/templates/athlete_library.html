<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="UTF-8">
  <title>Athlete Library</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
  <div class="container">
    <h1>Select a Reference Video</h1>
    <p>Choose a professional video for {{ sport.label }} - {{ technique.label }}</p>

    <form method="POST" action="{% url 'analyze_videos' %}">
      {% csrf_token %}
      <input type="hidden" name="user_video_path" value="{{ user_video_path }}">
      <div class="video-gallery">
        {% for video in athlete_videos %}
            <div class="video-option">
                <video width="320" height="240" controls>
                    <source src="{{ video.video.url }}" type="video/mp4">
                </video>
                <button class="btn" onclick="selectVideo('{{ video.video.url }}')">Use This Video</button>
            </div>
        {% endfor %}
      </div>
      <div class="center-button">
        <button class="btn" type="submit">Use Selected Video</button>
      </div>
    </form>
  </div>


    <script>
        function selectVideo(url) {
            if (window.opener && !window.opener.closed) {
                window.opener.setSelectedLibraryVideo(url);
                window.close();
            } else {
                alert("Main window not accessible.");
            }
        }
    </script>
</body>
</html>
